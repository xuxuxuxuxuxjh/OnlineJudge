# OnlineJudge 前端开发报告 - 迭代1

## 项目信息

**项目名称：** OnlineJudge 在线评测系统前端
**版本：** 1.0.0
**迭代周期：** 迭代1
**开发框架：** Vue.js 2.5.16
**前端开发团队：** 王昱邦、李欣格

---

## 1. 迭代1概述

### 1.1 迭代目标

迭代1的主要目标是建立项目基础架构，实现核心功能的基本框架。

**本迭代完成的工作：**
- ✅ 项目初始化和开发环境搭建
- ✅ 基础架构设计（双入口架构：OJ门户 + 管理后台）
- ✅ 核心页面框架搭建
- ✅ 基本路由配置
- ✅ API集成层实现
- ✅ 状态管理基础（Vuex）
- ✅ 国际化框架（i18n）

**未完成/待改进的工作：**
- ❌ 自动化测试（单元测试、E2E测试）
- ❌ 性能优化验证
- ❌ 完整的错误处理机制
- ❌ 部署文档和CI/CD流程测试
- ⚠️ 响应式设计需要进一步优化

---

## 2. 技术架构

### 2.1 项目结构

```
frontend/
├── build/                # Webpack构建配置
├── config/               # 环境配置
├── src/
│   ├── assets/          # 静态资源
│   ├── i18n/            # 国际化配置（3种语言）
│   ├── pages/
│   │   ├── oj/          # 用户端（27个视图组件）
│   │   └── admin/       # 管理端（11个视图组件）
│   ├── store/           # Vuex状态管理
│   ├── styles/          # 全局样式
│   └── utils/           # 工具函数
├── static/              # 静态文件
└── deploy/              # 部署配置
```

### 2.2 技术栈

**核心技术：**
- Vue.js 2.5.16 + Vuex 3.0.1 + Vue Router 3.0.1
- iView 2.13.0 + Element UI 2.3.7（UI组件库）
- Axios 0.18.0（HTTP客户端）
- Webpack 3.6.0（构建工具）

**特色功能库：**
- vue-codemirror-lite 1.0.4（代码编辑器）
- tar-simditor 3.0.5（Markdown编辑器）
- ECharts 3.8.5（图表可视化）
- KaTeX 0.10.0（数学公式）
- Moment.js 2.22.1（时间处理）

### 2.3 架构设计

**多页面应用（MPA）架构：**
- 两个独立入口：`/`（用户端）和 `/admin`（管理端）
- 分离的路由系统和组件树
- 共享的工具库和状态管理基础

**API集成层：**
- 统一的axios配置（`src/pages/oj/api.js`）
- 40+个API端点封装
- CSRF令牌自动处理
- 集中式错误拦截

**状态管理：**
- Vuex模块化设计
- 用户模块（认证、资料）
- 比赛模块（比赛数据、排名）
- 全局配置（网站设置、模态框状态）

---

## 3. 实现的核心功能

### 3.1 用户端功能（OJ门户）

**已实现的页面（27个）：**

**基础页面：**
- 首页（Home.vue）
- 关于页面（About.vue）
- FAQ页面（FAQ.vue）
- 404页面（404.vue）

**用户认证：**
- 登录/注册（Login.vue, Register.vue）
- 密码重置（ApplyResetPassword.vue, ResetPassword.vue）
- 登出（Logout.vue）

**题目模块：**
- 题目列表（ProblemList.vue）- 支持分页和基本筛选
- 题目详情（Problem.vue）- 展示题目描述、提交代码

**提交模块：**
- 提交列表（SubmissionList.vue）- 显示所有提交记录
- 提交详情（SubmissionDetails.vue）- 查看代码和判题结果

**比赛模块：**
- 比赛列表（ContestList.vue）
- 比赛详情（ContestDetail.vue）
- 比赛题目列表（ContestProblemList.vue）
- 比赛排名（ContestRank.vue）- ACM和OI规则
- ACM助手（ACMHelper.vue）

**排名系统：**
- ACM排名（ACMRank.vue）
- OI排名（OIRank.vue）

**用户中心：**
- 用户主页（UserHome.vue）
- 个人设置（Settings.vue）
  - 资料设置（ProfileSetting.vue）
  - 账户设置（AccountSetting.vue）
  - 安全设置（SecuritySetting.vue）

**公告：**
- 公告列表（Announcements.vue）

### 3.2 管理端功能

**已实现的页面（11个）：**

- 管理员登录（Login.vue）
- 仪表板（Dashboard.vue）
- 用户管理（User.vue）
- 题目列表（ProblemList.vue）
- 题目编辑（Problem.vue）
- 题目导入导出（ImportAndExport.vue）
- 比赛列表（ContestList.vue）
- 比赛编辑（Contest.vue）
- 公告管理（Announcement.vue）
- 系统配置（Conf.vue）
- 判题服务器（JudgeServer.vue）

### 3.3 关键技术实现

#### 代码编辑器集成

**位置：** `src/pages/oj/components/CodeMirror.vue`

**功能：**
- 语法高亮支持10+种编程语言
- 基于vue-codemirror-lite封装
- 支持代码提交前本地存储（防止数据丢失）

**实际状态：** ✅ 基本功能已实现，但移动端体验待优化

#### 国际化支持

**位置：** `src/i18n/`

**功能：**
- 支持3种语言：英语、简体中文、繁体中文
- OJ和Admin分别有独立的翻译文件
- 整合iView和Element UI的语言包

**实际状态：** ✅ 框架已搭建，主要界面文本已翻译

#### 路由系统

**OJ路由：** 18个主要路由
- 包含认证保护（requiresAuth meta）
- History模式，需要服务器配置支持

**Admin路由：** 14个路由
- 独立的路由实例
- 基础路径：`/admin/`

**实际状态：** ✅ 路由配置完成，导航正常

---

## 4. 开发过程

### 4.1 开发环境搭建

**工具安装：**
```bash
# Node.js v8.12.0
# npm v3.0.0+
npm install
```

**启动开发服务器：**
```bash
# 设置后端API地址
export TARGET=http://localhost:8000

# 构建DLL（首次）
export NODE_ENV=development
npm run build:dll

# 启动开发服务器
npm run dev
```

**实际问题：**
- Node.js版本较老（v8.12.0），与现代系统兼容性一般
- 需要使用`NODE_OPTIONS=--openssl-legacy-provider`解决OpenSSL问题

### 4.2 实际开发中遇到的问题

#### 问题1：项目基于旧版本技术栈

**现状：**
- Webpack 3（已过时，当前最新版本是Webpack 5）
- Vue 2（Vue 3已发布多年）
- Node.js 8（已停止维护）

**影响：**
- 构建速度较慢
- 缺少现代特性支持
- 安全更新缺失

**当前方案：** 暂时接受现状，计划在后续迭代中升级

#### 问题2：缺少测试

**现状：**
- 项目中没有任何自动化测试代码
- 没有测试配置文件（Jest、Mocha等）
- 所有功能验证依赖手动测试

**影响：**
- 无法保证代码质量
- 重构风险高
- 难以发现回归问题

**当前方案：** 已在迭代2计划中添加测试任务

#### 问题3：代码组织不够规范

**现状：**
- 部分文件缺少注释
- 组件职责不够清晰
- 工具函数缺少文档

**影响：**
- 团队协作困难
- 代码维护成本高

**当前方案：** 逐步重构，添加注释和文档

---

## 5. 功能验证

### 5.1 手动测试结果

**测试方法：** 手动在Chrome浏览器中测试主要功能

| 功能模块 | 测试内容 | 结果 | 备注 |
|---------|---------|------|------|
| 用户注册 | 注册新用户 | ✅ 通过 | 验证码功能正常 |
| 用户登录 | 登录已有用户 | ✅ 通过 | 会话管理正常 |
| 题目列表 | 浏览题目，分页 | ✅ 通过 | 加载速度可接受 |
| 题目详情 | 查看题目描述 | ✅ 通过 | Markdown渲染正常 |
| 代码提交 | 提交C++代码 | ✅ 通过 | 编辑器功能正常 |
| 提交状态 | 查看判题结果 | ✅ 通过 | 状态显示正确 |
| 比赛列表 | 浏览比赛 | ✅ 通过 | 筛选功能正常 |
| 比赛排名 | 查看ACM排名 | ✅ 通过 | 数据展示正确 |
| 语言切换 | 切换中英文 | ✅ 通过 | 部分界面有遗漏 |
| 管理后台 | 登录管理员 | ✅ 通过 | 权限控制正常 |
| 题目管理 | 创建新题目 | ✅ 通过 | 编辑器功能正常 |

**未测试的场景：**
- 跨浏览器兼容性（仅测试了Chrome）
- 移动设备响应式
- 高并发场景
- 边界情况和异常输入

### 5.2 已知问题

**Bug列表：**

1. **语言切换不完整**
   - 现象：部分界面文本切换语言后未更新
   - 影响：用户体验下降
   - 优先级：中
   - 计划：迭代2修复


2. **错误提示不够友好**
   - 现象：部分API错误直接显示原始错误信息
   - 影响：用户体验差
   - 优先级：低
   - 计划：迭代2优化

---

## 6. 构建与部署

### 6.1 构建配置

**开发构建：**
```bash
npm run dev
# 启动在 localhost:8080
# 支持热重载
```

**生产构建：**
```bash
npm run build
# 输出到 dist/ 目录
# 包含代码压缩和优化
```

**实际状态：**
- ✅ 开发环境可以正常运行
- ✅ 生产构建可以成功
- ❌ 未实际部署到生产环境测试
- ❌ 构建时间未优化（约40秒）

### 6.2 部署方案

**提供的部署方式：**
1. Docker部署（有Dockerfile和nginx.conf）
2. 手动部署（构建后部署dist目录）

**实际状态：**
- ⚠️ Docker配置存在但未实际验证
- ⚠️ Nginx配置未在生产环境测试
- ❌ 没有CI/CD流水线
- ❌ 没有部署文档

---

## 7. 代码质量

### 7.1 代码统计

- **总文件数：** 100个源文件（.vue + .js）
- **代码行数：** 约15,000行（估算）
- **组件数量：** 40+个可复用组件
- **路由数量：** 32个（OJ 18个 + Admin 14个）

### 7.2 代码规范

**使用的工具：**
- ESLint 3.19.0（配置为Standard风格）
- .editorconfig（统一编辑器配置）

**实际执行情况：**
- ⚠️ ESLint配置存在但未严格执行
- ⚠️ 部分代码不符合规范
- ❌ 没有pre-commit钩子强制检查

### 7.3 文档情况

**现有文档：**
- ✅ README.md（基本的安装和运行说明）
- ❌ 缺少API文档
- ❌ 缺少组件文档
- ❌ 缺少开发者指南
- ❌ 代码注释不够完善

---

## 8. 项目亮点

尽管存在诸多待改进之处，迭代1还是有一些值得肯定的地方：

### 8.1 清晰的架构设计

- 双入口MPA架构，OJ和Admin分离清晰
- Vuex状态管理模块化设计合理
- 路由组织结构清晰

### 8.2 丰富的功能集

- 38个用户功能
- 25个管理功能
- 覆盖了在线评测系统的核心需求

### 8.3 国际化支持

- 从项目初期就考虑了国际化
- 支持3种语言
- 为全球用户做好准备

### 8.4 技术选型合理

- Vue.js生态完整（Vue + Vuex + Vue Router）
- UI库成熟（iView + Element UI）
- 开发体验良好（热重载、ESLint）

---

## 9. 迭代1总结

### 9.1 完成情况

**目标达成度：** 约70%

**已完成：**
- ✅ 项目框架搭建
- ✅ 核心功能实现
- ✅ 基本可用的用户界面
- ✅ API集成

**未完成：**
- ❌ 自动化测试
- ❌ 性能优化
- ❌ 完整的文档
- ❌ 生产环境验证

### 9.2 主要问题

1. **缺少测试覆盖**
   - 没有任何自动化测试
   - 质量保证完全依赖手动测试

2. **技术栈过时**
   - 使用的技术版本较老
   - 需要在后续迭代中考虑升级

3. **文档不完善**
   - 缺少开发文档
   - 代码注释不足

4. **部署未验证**
   - Docker配置未测试
   - 没有实际部署经验

### 9.3 经验教训

**做得好的地方：**
- 项目结构清晰，易于理解
- 功能模块划分合理
- 代码风格基本统一

**需要改进的地方：**
- 应该从一开始就引入测试
- 应该更严格地执行代码规范
- 应该写更多的注释和文档
- 应该早点在真实环境中测试

### 9.4 团队反思

**分工情况：**
- ✅ 王昱邦负责用户前端（27个页面），李欣格负责管理员前端（11个页面）
- ✅ 分工明确，各自负责独立模块，减少了代码冲突
- ✅ 通过Vuex和公共组件实现了代码复用

**工作方式：**
- ✅ 采用模块化开发，互不干扰
- ⚠️ 代码审查机制不足，建议加强相互review
- ⚠️ 沟通主要依赖微信，需要更正式的会议记录

**技能差距：**
- 需要学习自动化测试
- 需要学习性能优化
- 需要学习CI/CD实践

**协作亮点：**
- 共同搭建了项目基础架构
- 统一了代码风格和开发规范
- 相互帮助解决技术难题

---

## 10. 迭代2计划

基于迭代1的经验，我们计划在迭代2中重点改进以下方面：

### 10.1 优先任务

**P0（必须完成）：**
1. 完善语言切换功能
2. 添加基本的单元测试（至少覆盖关键模块）
3. 完善错误处理机制

**P1（应该完成）：**
4. 跨浏览器兼容性测试（Chrome、Firefox、Safari、Edge）
5. 性能测试和基础优化
6. 完善API错误提示
7. 编写开发文档

**P2（可以完成）：**
8. 代码重构和优化
9. 增加代码注释
10. 改进代码编辑器体验

### 10.2 技术债务清单

迭代2需要偿还的技术债务：

1. 添加自动化测试框架（Jest + Vue Test Utils）
2. 配置pre-commit钩子强制代码检查
3. 建立代码审查流程
4. 编写组件使用文档
5. 验证Docker部署流程

---

## 11. 附录

### 11.1 技术栈版本清单

| 技术 | 版本 | 状态 |
|-----|------|------|
| Node.js | 8.12.0 | ⚠️ 过时 |
| Vue.js | 2.5.16 | ⚠️ 可升级到2.7或3.x |
| Vuex | 3.0.1 | ✅ 稳定 |
| Vue Router | 3.0.1 | ✅ 稳定 |
| Webpack | 3.6.0 | ⚠️ 过时 |
| iView | 2.13.0 | ✅ 稳定 |
| Element UI | 2.3.7 | ✅ 稳定 |
| Axios | 0.18.0 | ⚠️ 可升级 |
| ESLint | 3.19.0 | ⚠️ 过时 |

### 11.2 Git提交历史（本次迭代）

```
461126f - update frontend update selfdeploy.md
c4d78d1 - update frontend
db75335 - remove docker-compose.yml from gitignore
06a86dd - modified .gitignore
2029eef - 发现key泄漏，删除data/backend目录，修改.gitignore
```

**提交情况分析：**
- 提交信息不够规范
- 缺少具体的功能描述
- 需要改进提交习惯

### 11.3 参考资料

**使用的文档：**
1. Vue.js 2.x官方文档
2. iView UI组件库文档
3. Element UI组件库文档
4. Webpack 3文档


---

## 12. 团队信息与分工

### 12.1 团队成员

**前端开发团队：**
- 王昱邦 - 负责用户前端（OJ门户）
- 李欣格 - 负责管理员前端（Admin后台）

### 12.2 详细分工

#### 王昱邦 - 用户前端开发

**负责模块：**
1. **用户认证模块**
   - 登录/注册页面（Login.vue, Register.vue）
   - 密码重置功能（ApplyResetPassword.vue, ResetPassword.vue）
   - 登出功能（Logout.vue）

2. **题目模块**
   - 题目列表页面（ProblemList.vue）
   - 题目详情页面（Problem.vue）
   - 代码编辑器集成（CodeMirror.vue）
   - 题目筛选和搜索功能

3. **提交模块**
   - 提交列表页面（SubmissionList.vue）
   - 提交详情页面（SubmissionDetails.vue）
   - 提交状态实时更新

4. **比赛模块（用户端）**
   - 比赛列表页面（ContestList.vue）
   - 比赛详情页面（ContestDetail.vue）
   - 比赛题目列表（ContestProblemList.vue）
   - 比赛排名展示（ContestRank.vue - ACM/OI）

5. **用户中心**
   - 用户主页（UserHome.vue）
   - 个人设置页面（Settings.vue及其子页面）
   - 用户资料展示

6. **排名系统**
   - ACM排名页面（ACMRank.vue）
   - OI排名页面（OIRank.vue）

7. **其他页面**
   - 首页（Home.vue）
   - 公告页面（Announcements.vue）
   - 关于页面（About.vue）
   - FAQ页面（FAQ.vue）

**技术工作：**
- OJ门户路由配置（`src/pages/oj/router/`）
- 用户端API封装（`src/pages/oj/api.js`）
- 用户端公共组件开发（NavBar、Panel、Pagination等）
- 代码编辑器集成与优化

**工作量统计：**
- 页面数量：27个视图组件
- 公共组件：7个
- 路由配置：18个路由


#### 李欣格 - 管理员前端开发

**负责模块：**
1. **管理员认证**
   - 管理员登录页面（Login.vue）
   - 权限验证和路由守卫

2. **仪表板**
   - 系统统计仪表板（Dashboard.vue）
   - 数据可视化图表集成（使用ECharts）

3. **用户管理模块**
   - 用户列表管理（User.vue）
   - 用户创建/编辑/删除功能
   - 用户权限管理

4. **题目管理模块**
   - 题目列表管理（ProblemList.vue）
   - 题目创建/编辑（Problem.vue）
   - 题目导入/导出功能（ImportAndExport.vue）
   - 富文本编辑器集成（Simditor）

5. **比赛管理模块**
   - 比赛列表管理（ContestList.vue）
   - 比赛创建/编辑（Contest.vue）
   - 比赛题目管理
   - ACM助手工具

6. **系统管理**
   - 公告管理（Announcement.vue）
   - 系统配置（Conf.vue）
   - 判题服务器监控（JudgeServer.vue）
   - 测试用例管理（PruneTestCase.vue）

**技术工作：**
- Admin后台路由配置（`src/pages/admin/router.js`）
- 管理端API封装（`src/pages/admin/api.js`）
- 管理端公共组件开发（SideMenu、TopNav、Panel等）
- 富文本编辑器和数学公式编辑器集成

**工作量统计：**
- 页面数量：11个视图组件
- 公共组件：11个
- 路由配置：14个路由

### 12.3 共同完成的工作

**基础架构：**
- 项目初始化和开发环境搭建
- Vuex状态管理设计和实现
- 国际化框架搭建（Vue I18n）
- 公共工具函数（`src/utils/`）
- 全局样式和主题定制

**技术调研：**
- Vue.js生态系统学习
- UI组件库选型和集成
- 构建工具配置和优化
- 部署方案设计

**文档工作：**
- 项目README编写
- API文档整理
- 迭代1开发报告编写

### 12.4 协作方式

**开发流程：**
1. 共同讨论需求和技术方案
2. 分模块独立开发
3. 代码提交前相互review
4. 定期同步进度和解决问题

**沟通工具：**
- 微信群：日常沟通
- Git：代码管理和协作
- 腾讯会议：周例会

**版本控制：**
- 分支策略：功能分支开发，合并到main分支
- 提交规范：描述清楚修改内容
- 代码审查：重要功能相互审查

### 12.5 个人收获

**王昱邦：**
- 深入学习了Vue.js组件化开发
- 掌握了Vuex状态管理的使用
- 熟悉了前端路由和SPA开发模式
- 提升了代码编辑器集成能力
- 学会了使用axios进行API调用

**李欣格：**
- 学习了后台管理系统的开发模式
- 掌握了ECharts数据可视化技术
- 熟悉了富文本编辑器的集成
- 提升了组件抽象和复用能力
- 学会了权限管理和路由守卫

---

**报告编写：** 王昱邦、李欣格
**报告日期：** 2025年10月13日
**迭代周期：** 迭代1（共3次迭代）

---

## 评分标准自评

根据软件工程课程评分标准，我们对迭代1进行自评：

| 评分项 | 权重 | 自评分数 | 说明 |
|-------|------|---------|------|
| 功能实现完整性 | 30% | 75/100 | 核心功能已实现，但有待完善 |
| 代码质量 | 20% | 60/100 | 架构清晰，但缺少测试和注释 |
| 文档完整性 | 15% | 50/100 | 基本文档有，但不够详细 |
| 团队协作 | 15% | 65/100 | 基本分工，但协作流程待改进 |
| 创新性 | 10% | 70/100 | 技术栈常规，但架构设计合理 |
| 部署运行 | 10% | 40/100 | 可以本地运行，但未验证部署 |

**迭代1综合评分：** 约 64/100

**改进方向：** 重点提升测试覆盖、文档完整性和部署验证
